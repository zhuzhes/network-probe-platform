# 网络拨测平台用户指南

## 概述

网络拨测平台是一个基于云的分布式网络监控服务，帮助企业用户监控网络连接质量和服务可用性。通过部署在全球各地的代理节点，您可以从不同地理位置和网络环境测试您的服务性能。

## 快速开始

### 1. 账户注册

1. 访问平台主页
2. 点击"注册"按钮
3. 填写企业信息：
   - 用户名
   - 邮箱地址
   - 公司名称
   - 密码
4. 验证邮箱并激活账户

### 2. 账户充值

平台采用点数消费模式：

1. 登录后进入"账户管理"页面
2. 点击"充值"按钮
3. 选择充值金额
4. 完成支付流程
5. 点数将自动添加到您的账户

**点数消费规则：**
- ICMP拨测：1点数/次
- TCP拨测：2点数/次
- UDP拨测：2点数/次
- HTTP/HTTPS拨测：3点数/次

### 3. 创建第一个拨测任务

1. 进入"任务管理"页面
2. 点击"创建任务"
3. 填写任务信息：
   - 任务名称
   - 目标地址
   - 协议类型
   - 测试频率
   - 超时设置
4. 选择代理位置（可选）
5. 保存并启动任务

## 功能详解

### 任务管理

#### 创建拨测任务

**基本设置：**
- **任务名称**：便于识别的任务名称
- **描述**：任务的详细说明
- **目标地址**：要测试的服务器地址或域名
- **协议类型**：选择ICMP、TCP、UDP或HTTP/HTTPS
- **端口**：TCP/UDP协议需要指定端口号

**高级设置：**
- **测试频率**：执行间隔（秒），最小值为60秒
- **超时时间**：单次测试的超时限制
- **优先级**：任务执行优先级（1-10）
- **首选位置**：指定代理地理位置
- **首选运营商**：指定网络运营商

#### 协议特定参数

**ICMP (Ping)：**
- 数据包大小
- 数据包数量
- 间隔时间

**TCP：**
- 连接超时
- 保持连接时间

**UDP：**
- 数据包大小
- 响应超时

**HTTP/HTTPS：**
- 请求方法（GET、POST等）
- 请求头
- 请求体
- 跟随重定向
- SSL验证

#### 任务状态管理

- **激活**：任务正常执行
- **暂停**：临时停止执行
- **完成**：一次性任务已完成
- **失败**：任务执行出错

### 结果查看

#### 实时监控

在任务详情页面可以查看：
- 最新测试结果
- 实时性能指标
- 代理状态信息

#### 历史数据分析

**数据筛选：**
- 时间范围选择
- 代理位置筛选
- 结果状态筛选

**性能指标：**
- 响应时间趋势
- 成功率统计
- 错误分布
- 地理位置性能对比

#### 数据可视化

- 时间序列图表
- 地理分布地图
- 性能对比柱状图
- 可用性饼图

### 代理管理

#### 查看可用代理

在"代理管理"页面可以查看：
- 代理地理位置
- 网络运营商
- 当前状态
- 性能统计
- 资源使用情况

#### 代理选择策略

系统会根据以下因素自动选择最优代理：
- 地理位置距离
- 网络运营商匹配
- 历史性能表现
- 当前负载情况

### 通知设置

#### 邮件通知

可配置以下事件的邮件通知：
- 任务执行失败
- 服务不可用
- 点数余额不足
- 系统维护通知

#### 通知配置

1. 进入"账户设置"
2. 选择"通知设置"
3. 配置通知类型和接收邮箱
4. 设置通知阈值

## API使用

### 认证

所有API请求需要包含认证头：

```http
Authorization: Bearer YOUR_JWT_TOKEN
```

获取JWT令牌：

```http
POST /api/v1/auth/token
Content-Type: application/json

{
    "username": "your_username",
    "password": "your_password"
}
```

### 常用API端点

#### 任务管理

```http
# 创建任务
POST /api/v1/tasks
Content-Type: application/json

{
    "name": "测试任务",
    "protocol": "http",
    "target": "example.com",
    "frequency": 300,
    "timeout": 30
}

# 获取任务列表
GET /api/v1/tasks

# 获取任务详情
GET /api/v1/tasks/{task_id}

# 更新任务
PUT /api/v1/tasks/{task_id}

# 删除任务
DELETE /api/v1/tasks/{task_id}
```

#### 结果查询

```http
# 获取拨测结果
GET /api/v1/results?task_id={task_id}&start_time={start}&end_time={end}

# 获取统计数据
GET /api/v1/statistics?task_id={task_id}&period=1d
```

#### 代理信息

```http
# 获取代理列表
GET /api/v1/agents

# 获取代理详情
GET /api/v1/agents/{agent_id}
```

### API响应格式

成功响应：
```json
{
    "success": true,
    "data": {...},
    "message": "操作成功"
}
```

错误响应：
```json
{
    "success": false,
    "error": {
        "code": "INVALID_PARAMETER",
        "message": "参数验证失败",
        "details": {...}
    }
}
```

## 最佳实践

### 任务配置建议

1. **合理设置频率**：避免过于频繁的测试消耗过多点数
2. **选择合适的超时**：根据网络环境设置合理的超时时间
3. **使用描述性名称**：便于后续管理和识别
4. **分组管理**：使用命名规范对任务进行分类

### 性能优化

1. **批量操作**：使用API批量创建和管理任务
2. **合理筛选**：查询历史数据时使用适当的时间范围
3. **缓存结果**：对于频繁查询的数据进行本地缓存

### 成本控制

1. **监控点数消耗**：定期检查点数使用情况
2. **优化测试频率**：根据实际需求调整测试间隔
3. **使用预警**：设置余额不足提醒

## 故障排除

### 常见问题

**Q: 任务创建后没有执行结果？**
A: 检查以下项目：
- 账户点数是否充足
- 目标地址是否可访问
- 任务状态是否为"激活"
- 代理是否在线

**Q: 拨测结果显示超时？**
A: 可能原因：
- 网络延迟较高
- 目标服务响应慢
- 超时设置过短
- 防火墙阻止连接

**Q: API调用返回401错误？**
A: 认证问题：
- JWT令牌已过期
- 令牌格式错误
- 用户权限不足

### 联系支持

如果遇到无法解决的问题：

1. 发送邮件至：support@network-probe.com
2. 在线客服：工作日9:00-18:00
3. 技术文档：查看开发者文档获取更多信息

## 更新日志

### v1.0.0 (2024-01-01)
- 初始版本发布
- 支持ICMP、TCP、UDP、HTTP/HTTPS协议
- Web界面和API接口
- 基础通知功能

### v1.1.0 (2024-02-01)
- 新增代理地理位置选择
- 优化任务调度算法
- 增强数据可视化功能

### v1.2.0 (2024-03-01)
- 支持自定义HTTP请求头
- 新增批量任务管理
- 改进错误处理和通知